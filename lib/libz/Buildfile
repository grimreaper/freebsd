# $FreeBSD$

LIBDIR = ${STAGEDIR}/lib
INCDIR = ${STAGEDIR}/usr/include

LIB = z

SRCS = \
	adler32.c \
	compress.c \
	crc32.c \
	deflate.c \
	gzio.c \
	infback.c \
	inffast.c \
	inflate.c \
	inftrees.c \
	trees.c \
	uncompr.c \
	zopen.c \
	zutil.c

INCS = \
	zconf.h \
	zlib.h

CFLAGS += -DHAS_snprintf -DHAS_vsnprintf

minigzip: all minigzip.o
	$(CC) -o minigzip minigzip.o -L. -lz

example: all example.o
	$(CC) -o example example.o -L. -lz

test: example minigzip
	(export LD_LIBRARY_PATH=. ; ./example )
	(export LD_LIBRARY_PATH=. ; \
		echo hello world | ./minigzip | ./minigzip -d )

DIRDEP= include include/machine stage sys/MACHINE_ARCH/include sys/sys
.include <bsd.lib.mk>
